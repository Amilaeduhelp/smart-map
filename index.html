<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart සිතියම් පොත</title>
    <style>
        /* pull-to-refresh වැළැක්වීමට වඩාත් කාර්යක්ෂම කේතය */
        html {
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: fixed;
        }

        body {
            font-family: 'Arial Unicode MS', 'Iskoola Pota', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .info-bar {
            background-color: #d4edda;
            color: #000000;
            padding: 8px 15px; /* Adjusted padding */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 20;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .info-bar-content {
            flex-grow: 1;
            font-size: 0.9em;
        }
        
        #togglePlaceListButton {
            background-color: #114704;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Arial Unicode MS', 'Iskoola Pota', Arial, sans-serif;
            font-size: 0.9em;
            margin-left: 10px;
        }
        #togglePlaceListButton:hover {
            background-color: #2c6809;
        }


        .container { /* This will now primarily hold the map */
            display: flex;
            flex-direction: column; /* Map container will take full space */
            width: 100%;
            height: calc(100vh - 70px); /* Adjusted for new info-bar (approx 30px) and footer (40px) heights */
            margin-top: 35px; /* Approximate height of info-bar */
            margin-bottom: 40px; /* Space for footer */
        }
        
        /* POPUP STYLES for .place-list */
        .place-list {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90vw;
            max-width: 450px; /* Max width for the popup */
            height: 85vh;
            max-height: 600px; /* Max height for the popup */
            background-color: #fff;
            padding: 0; /* Padding will be on inner content */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            z-index: 100;
            display: none; /* Hidden by default */
            flex-direction: column;
            overflow: hidden; /* Scroll will be on an inner div */
        }

        .place-list.visible {
            display: flex;
        }
        
        .place-list-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            border-bottom: 1px solid #ddd;
            background-color: #f0f0f0;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }
        .place-list-popup-header .place-list-header-text { /* Re-styling for popup context */
             font-size: 1.2em;
             font-weight: bold;
        }
         .place-list-popup-header .dropdown-arrow {
            cursor: pointer;
         }


        #closePopupButton {
            background: none;
            border: none;
            font-size: 1.8em;
            font-weight: bold;
            color: #555;
            cursor: pointer;
            padding: 0 5px;
        }
        #closePopupButton:hover {
            color: #000;
        }

        .place-list-content-wrapper { /* New wrapper for scrolling content */
            padding: 15px;
            overflow-y: auto;
            flex-grow: 1; /* Takes remaining space in the flex column of .place-list */
            display: flex;
            flex-direction: column;
        }


        /* Modified header styling to include dropdown - now inside popup header */
        .place-list-header { /* This will now be part of place-list-popup-header for map name */
            color: #333;
            /* border-bottom: 2px solid #8b4513; */ /* Handled by popup header border */
            /* padding-bottom: 10px; */
            margin-top: 0;
            display: flex;
            align-items: center;
            justify-content: space-between; /* For map name and arrow */
            cursor: pointer;
            user-select: none;
            flex-grow: 1; /* Takes space next to close button */
        }

        /* Dropdown menu relative to the popup */
        .dropdown-menu {
            display: none;
            position: absolute; /* Relative to .place-list or its header part */
            background-color: white;
            /* width: 100%; */ /* Adjust width as needed, maybe not full width of popup */
            width: calc(100% - 30px); /* Match padding of content wrapper */
            left: 15px; /* Align with content padding */
            top: 50px; /* Position below the popup header */
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 105; /* Above popup content but can be tricky */
            border-radius: 4px;
            margin-top: 0px;
        }


        .place-list ul { /* #placesList */
            list-style-type: none;
            padding: 0;
            margin: 0;
            flex-grow: 1; /* To take space within .place-list-content-wrapper */
            overflow-y: auto; /* If list itself is very long and other elements are fixed above it */
        }

        .place-list li {
            padding: 8px 10px; /* Slightly reduced padding */
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 0.95em;
        }

        .place-list li:hover {
            background-color: #f0f0f0;
        }

        .map-container { /* Will take full space of .container */
            flex-grow: 1;
            position: relative;
            overflow: auto; /* Ensure scrolling is enabled for the container */
            background-color: #ffffff;
            height: 100%; /* Ensure it fills the container */
            -webkit-overflow-scrolling: touch; /* For smoother scrolling on iOS */
        }

        .map-wrapper {
            position: relative;
            width: fit-content;
            height: auto; /* Changed from fit-content to auto */
            min-width: 100%;
            min-height: 100%;
        }

        .map-image {
            display: block;
        }

        .location-marker, .location-ring, .tooltip /* Unchanged */ {
            /* ... existing styles ... */
        }
        .location-marker { position: absolute; width: 10px; height: 10px; background-color: red; border-radius: 50%; transform: translate(-50%, -50%); z-index: 5; pointer-events: none; }
        .location-ring { position: absolute; width: 80px; height: 80px; border: 4px solid red; border-radius: 50%; transform: translate(-50%, -50%); z-index: 4; pointer-events: none; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(1.8); opacity: 0; } }
        .tooltip { position: absolute; background-color: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 4px; font-size: 25px; pointer-events: none; z-index: 6; display: none; transform: translateX(40px); }


        .place-list li.active {
            background-color: #e0e0e0;
            font-weight: bold;
        }

        /* Alphabet buttons and Show All button inside the popup content wrapper */
        .alphabet-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 1px; /* Adjusted gap */
            padding: 2px 0; /* Adjusted padding */
            border-bottom: 1px solid #ddd;
            margin-bottom: 8px; /* Adjusted margin */
        }

        .alphabet-button {
            background-color: #114704;
            color: white;
            border: none;
            padding: 4px 8px; /* Adjusted padding */
            border-radius: 2px;
            cursor: pointer;
            font-family: 'Arial Unicode MS', 'Iskoola Pota', Arial, sans-serif;
            font-size: 15px; /* Adjusted font size */
            min-width: 28px; /* Adjusted min-width */
            text-align: center;
        }
        .alphabet-button:hover { background-color: #286b05; }
        .alphabet-button.active { background-color: #77b708; box-shadow: 0 0 3px rgba(0,0,0,0.3); }


        .show-all-button, #backButton { /* Common styling for these buttons inside popup */
            background-color: #28a745;
            color: white;
            border: none;
            padding: 2px 5px; /* Adjusted padding */
            border-radius: 3px;
            cursor: pointer;
            font-family: 'Arial Unicode MS', 'Iskoola Pota', Arial, sans-serif;
            font-size: 15px; /* Adjusted font size */
            margin-bottom: 8px; /* Adjusted margin */
            display: block;
            width: 100%;
        }
        .show-all-button:hover, #backButton:hover { background-color: #218838; }
        #backButton { background-color: #8b4513; }
        #backButton:hover { background-color: #6b3209; }


        .footer { /* Unchanged, but ensure z-index is lower than popup */
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px; 
            background-color: rgba(255, 255, 255, 0.95); 
            border-top: 1px solid #ddd;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 19; /* Lower than popup's z-index */
            font-size: 14px;
            box-sizing: border-box;
        }
        .footer-brand { font-weight: bold; }
        .footer-brand a { color: #114704; text-decoration: none; }
        .footer-brand a:hover { text-decoration: underline; }
        .footer-reset-button { background-color: #b71a09; color: white; border: none; padding: 5px 10px; border-radius: 6px; cursor: pointer; font-family: 'Arial Unicode MS', 'Iskoola Pota', Arial, sans-serif; }
        .footer-reset-button:hover { background-color: #6b3209; }

        .dropdown-menu a { padding: 10px 15px; text-decoration: none; display: block; color: black; border-bottom: 1px solid #eee; }
        .dropdown-menu a:hover { background-color: #f1f1f1; }
        .dropdown-menu.show { display: block; }

        /* Custom Scrollbar Styles for Webkit browsers (Chrome, Safari, Edge) */
        /* Thin scrollbar for map-container and place-list-content-wrapper */
        .map-container::-webkit-scrollbar,
        .place-list-content-wrapper::-webkit-scrollbar {
            width: 8px; /* Width of the vertical scrollbar */
            height: 8px; /* Height of the horizontal scrollbar */
        }

        .map-container::-webkit-scrollbar-track,
        .place-list-content-wrapper::-webkit-scrollbar-track {
            background: #f1f1f1; /* Color of the track */
            border-radius: 4px;
        }

        .map-container::-webkit-scrollbar-thumb,
        .place-list-content-wrapper::-webkit-scrollbar-thumb {
            background: #888; /* Color of the scrollbar thumb */
            border-radius: 4px;
        }

        .map-container::-webkit-scrollbar-thumb:hover,
        .place-list-content-wrapper::-webkit-scrollbar-thumb:hover {
            background: #555; /* Color of the scrollbar thumb on hover */
        }

        /* Styles for Search Input and Suggestions */
        #placeSearchInput {
            width: calc(100% - 20px); /* Full width minus padding */
            padding: 8px 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box; /* Include padding in width */
            font-family: 'Arial Unicode MS', 'Iskoola Pota', Arial, sans-serif;
            font-size: 0.95em;
        }

        #suggestionsList {
            list-style-type: none;
            padding: 0;
            margin: -5px 0 10px 0; /* Adjust margin to sit close to search input */
            border: 1px solid #eee;
            border-top: none;
            border-radius: 0 0 4px 4px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-height: 150px; /* Limit height of suggestions */
            overflow-y: auto;
            display: none; /* Hidden by default */
        }
        #suggestionsList li {
            padding: 8px 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 0.9em;
            color: #333;
        }
        #suggestionsList li:last-child {
            border-bottom: none;
        }
        #suggestionsList li:hover {
            background-color: #f0f0f0;
        }


        /* මීඩියා විමසුම් සඳහා - Popup is inherently mobile-friendly */
        @media (max-width: 768px) {
            .info-bar-content {
                font-size: 0.8em; /* Smaller text on mobile info bar */
            }
             #togglePlaceListButton {
                padding: 5px 10px;
                font-size: 0.8em;
            }

            .place-list { /* Popup adjustments for smaller screens if needed */
                width: 95vw;
                height: 90vh;
            }
            .place-list-popup-header .place-list-header-text {
                 font-size: 1.1em;
            }
            .dropdown-menu {
                /* top: 45px; */ /* Adjust if header height changes on mobile */
            }
        }
    </style>
</head>
<body>
    <div class="info-bar">
        <div class="info-bar-content" id="infoContent">ස්ථානයක් තෝරන්න</div>
        <button id="togglePlaceListButton">ස්ථාන නාමාවලිය හා වෙනත් සිතියම්</button>
    </div>

    <div class="container">
        <div class="map-container" id="mapContainer">
            <div class="map-wrapper" id="mapWrapper">
                <img src="https://www.eduhelp.lk/wp-content/uploads/2025/05/AL-ලංකා-01-01.jpg" alt="සිතියම" class="map-image" id="mapImage">
                <div id="locationMarker" class="location-marker" style="display: none;"></div>
                <div id="locationRing" class="location-ring" style="display: none;"></div>
                <div id="tooltip" class="tooltip"></div>
            </div>
        </div>
    </div>
    
    <div class="place-list" id="placeListPopup">
        <div class="place-list-popup-header">
            <div class="place-list-header" id="mapSelectorHeader">
                <div class="place-list-header-text" id="currentMapName">උසස් පෙළ ලංකා සිතියම</div>
                <div class="dropdown-arrow">▼</div>
            </div>
            <button id="closePopupButton" title="Close">&times;</button>
        </div>
        <div class="dropdown-menu" id="mapDropdown">
            <a href="#" data-value="sl_al">උසස් පෙළ ලංකා සිතියම</a>
            <a href="#" data-value="india_al">උසස් පෙළ ඉන්දියා සිතියම</a>
            <a href="#" data-value="europe_al">උසස් පෙළ යුරෝපා සිතියම</a>
            <a href="#" data-value="sl_ol">සාමාන්‍ය පෙළ ලංකා සිතියම</a>
            <a href="#" data-value="eurasia_ol">සාමාන්‍ය පෙළ යුරේසියා සිතියම</a>
        </div>

        <div class="place-list-content-wrapper">
            <input type="text" id="placeSearchInput" placeholder="ස්ථාන සොයන්න...">
            <ul id="suggestionsList"></ul> <div class="alphabet-buttons" id="alphabetButtons">
            </div>
            <button id="showAllButton" class="show-all-button">සියලුම ස්ථාන</button>
            <ul id="placesList">
            </ul>
        </div>
    </div>
    
    <div class="footer">
        <div class="footer-brand">
            <a href="https://www.eduhelp.lk/index.php/educational-services/" target="_blank">අමිල උඩවත්ත-eduhelp.lk<br>මෙහි නොමැති හෝ වැරදි ස්ථානලකුණු වී ඇති තැන් ගැන දන්වන්න.0701551279 </a>
        </div>
        <button id="footerResetButton" class="footer-reset-button">Reset</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mapContainer = document.getElementById('mapContainer');
            const mapWrapper = document.getElementById('mapWrapper');
            const mapImage = document.getElementById('mapImage');
            
            // Place List Popup elements
            const placeListPopup = document.getElementById('placeListPopup'); // The main popup div
            const placesListUL = document.getElementById('placesList'); // The UL for place names
            const togglePlaceListButton = document.getElementById('togglePlaceListButton');
            const closePopupButton = document.getElementById('closePopupButton');

            const locationMarker = document.getElementById('locationMarker');
            const locationRing = document.getElementById('locationRing');
            const tooltip = document.getElementById('tooltip');
            const footerResetButton = document.getElementById('footerResetButton');
            const alphabetButtons = document.getElementById('alphabetButtons');
            const showAllButton = document.getElementById('showAllButton');
            const infoContent = document.getElementById('infoContent');
            
            const mapSelectorHeader = document.getElementById('mapSelectorHeader'); // Inside popup
            const currentMapName = document.getElementById('currentMapName');     // Inside popup
            const mapDropdown = document.getElementById('mapDropdown');           // Inside popup

            // New search elements
            const placeSearchInput = document.getElementById('placeSearchInput');
            const suggestionsList = document.getElementById('suggestionsList');

            let activePlace = null;
            let activeLetterFilter = null;
            let currentMapKey = 'sl_al';
            
            // --- මෙම කේතය, pull-to-refresh වැළැක්වීමට සහ ස්ක්‍රෝල් කිරීමට ඉඩ දීමට ---
            document.addEventListener('touchmove', function(e) {
                // mapContainer හෝ place-list-content-wrapper තුළ ස්පර්ශයක් නම්, ස්ක්‍රෝල් කිරීමට ඉඩ දෙන්න
                if (e.target.closest('#mapContainer') || e.target.closest('.place-list-content-wrapper')) {
                    return; // Allow default touchmove behavior for these elements
                }
                // වෙනත් ඕනෑම තැනක touch-drag එක නවත්වන්න (pull-to-refresh වළක්වයි)
                e.preventDefault();
            }, { passive: false });

            // --- POPUP SCRIPT ---
            togglePlaceListButton.addEventListener('click', function() {
                placeListPopup.classList.toggle('visible');
                // When opening the popup, reset search and filters
                placeSearchInput.value = '';
                suggestionsList.style.display = 'none';
                populatePlacesList(maps[currentMapKey].places); // Ensure all places are shown when opening
                activeLetterFilter = null;
                updateAlphabetButtonsState();
                resetPopupButtonsVisibility(true); // Show alphabet and show all buttons
                removeBackButton(); // Ensure back button is removed when opening
            });

            closePopupButton.addEventListener('click', function() {
                placeListPopup.classList.remove('visible');
                mapDropdown.classList.remove('show'); // Also close dropdown if open
            });
            
            const maps = {
                sl_al: { url: "https://www.eduhelp.lk/wp-content/uploads/2025/05/AL-ලංකා-01-01-1.jpg",
                    displayName: "උසස් පෙළ ලංකා සිතියම",
                    places: [ 
					{ "name": "අනුරාධපුරය", "xPercent": 40.2, "yPercent": 40.8, "info": "ශ්‍රී ලංකාවේ මුල් ම අගනුවර වෙයි. පණ්ඩුකාභය රජු මෙහි පාලකයා ය. පස්වන මිහිඳු රජු චෝළයින්ගේ ග්‍රහණයට නතු වන තුරු වර්ෂ 1450ක් පමණ ලංකාවේ අගනුවර ලෙස පැවතුණි." }, 
					{ "name": "පොළොන්නරුව", "xPercent": 58.3, "yPercent": 50.4, "info": "ශ්‍රී ලංකාවේ දෙවැනි අගනුවරයි. අනුරාධපුර යුගයේ අග එල්ල වූ චෝළ ආක්‍රමණ වලින් පසු ලංකාවේ උතුරු කොටසේ බලය අල්ලාගත් චෝලයෝ මෙය සිය මධ්‍යස්ථානය කරගත්හ.මෙය මධ්‍යස්ථානය කරගත් ලංකාවේ පළමු පාලකයා මහා විජයබාහු රජුය. පරාක්‍රම පාණ්ඩ්‍ය රජ දවස කාලිංගමාඝ මෙහි බලය අල්ලාගන්නා තුරු එය වසර 250ක් පමණ ලංකාවේ අගනුවර වශයෙන් පැවතුණි." }, 
					{ "name": "මහනුවර", "xPercent": 45.7, "yPercent": 63.5, "info": "සෙංකඩගලපුර හෙවත් ලංකාවේ අවසන් රාජධානියයි. කෝට්ටේ හයවන බුවනෙකබාහු හෙවත් සපුමල්කුමාරයා බලයේ සිටි කාලයේ සේනාසම්මත වික්‍රමබාහු රජු සෙංකඩගල රාජධානිප පිහිටුවී ය. 1815 දී ශ්‍රී වික්‍රමරාජසිංහ රජු ඉංග්‍රීසීන්ගේ ග්‍රහණයට නතුවන තුරු එය වර්ෂ 400ක් පමණ කාලයක් ලංකාවේ අගනුර වශයෙන් පැවතියේ ය. " }, 
					{ "name": "යාපනය", "xPercent": 31.8, "yPercent": 12.8, "info": "ලංකාවේ තවත් ප්‍රාදේශීය රාජධානියක ප්‍රමුඛ නගරය යි.මෙහි ආරම්භය පිළිබඳ නිශ්චිත කාලවකවානු සඳහන් නැතත්, 1619දී පිලිප් ද ඔලිවේරා නම් පෘතුගීසි කපිතාත් මේජර්වරයා විසින් යටත් කරගන්නා තුරු එය ප්‍රාදේශීය රාජධානියක් වශයෙන් පැවතියේ ය.මෙහි වැඩි ම කාලයක් බලයේ සිටියේ ආර්යචක්‍රවර්තී පරපුරයි" }, 
					{ "name": "ගාල්ල", "xPercent": 30.9, "yPercent": 89.2, "info": "ලංකාවේ දකුණු වෙරළාශ්‍රිත පැරණි වරායකි. ගම්පොළ යුගයේ දී චීන සෙන්පති චෙංහෝගේ පැමිණීමට අදාළ සාධකයක් වන ත්‍රිභාෂා සෙල්ලිපිය මේ අසල තිබී හමු වී තිබේ." }, 
					{ "name": "තිස්සමහාරාමය", "xPercent": 64.8, "yPercent": 84.9, "info": "ලංකාවේ දකුණු පළාත්බදව ඇති ඓතිහාසික නගරයකි. වඩාත් ප්‍රකට වී ඇත්තේ ආගමික අංශයෙනි.මෙය පැරණි මාගම හෙවත් කාවන්තිස්ස රජුගේ අගනුවර සීමාවට අයත් ස්ථානයක් වශයෙන් හඳුනාගෙන ඇත." }, 
					{ "name": "සීගිරිය", "xPercent": 50.3, "yPercent": 50.3, "info": "අනුරාධපුර යුගයේ එක් පාලන මධ්‍යස්ථානයකි. ගිරි බලකාටුවක් හෝ රාජකීය විනෝද උයනකි.පළමු කාශ්‍යප රජු මේ නිර්මාණයේ හිමිකරු විය හැක. නමුත් ධාතුසේන රජසමයේ මෙහි ඉදිකිරීම් ඇරඹී යයි ද මතයකි." }, 
					{ "name": "දඹකොළපටුන", "xPercent": 30.2, "yPercent": 9.7, "info": "ජම්බුකෝළපට්ටනය හෙවත් වත්මන් සම්බිලිතුරෙයි. මෙය ලංකාවේ පැරණි තොටුපළකි. නමුත් වාණිජ වරායක් නොවී ය. ශ්‍රී මහාබෝධිය වැඩමවීම මේ ඔස්සේ සිදු වූයෙන් ඉතිහාස ගතවිය. ඉතිහාසයේ මේ ස්ථානය ගැන සඳහන් වස්සේ අවස්ථා කිහිපයක දී පමණි." }, 
					{ "name": "සම්බිලිතුරෙයි(දඹකොළපටුන)", "xPercent": 30.2, "yPercent": 9.7, "info": "ජම්බුකෝළපට්ටනය හෙවත් වත්මන් සම්බිලිතුරෙයි. මෙය ලංකාවේ පැරණි තොටුපළකි. නමුත් වාණිජ වරායක් නොවී ය. ශ්‍රී මහාබෝධිය වැඩමවීම මේ ඔස්සේ සිදු වූයෙන් ඉතිහාස ගතවිය. ඉතිහාසයේ මේ ස්ථානය ගැන සඳහන් වස්සේ අවස්ථා කිහිපයක දී පමණි." }, 
					{ "name": "ජම්බුකෝළපට්ටන", "xPercent": 30.2, "yPercent": 9.7, "info": "ජම්බුකෝළපට්ටනය හෙවත් වත්මන් සම්බිලිතුරෙයි. මෙය ලංකාවේ පැරණි තොටුපළකි. නමුත් වාණිජ වරායක් නොවී ය. ශ්‍රී මහාබෝධිය වැඩමවීම මේ ඔස්සේ සිදු වූයෙන් ඉතිහාස ගතවිය. ඉතිහාසයේ මේ ස්ථානය ගැන සඳහන් වස්සේ අවස්ථා කිහිපයක දී පමණි." }, 
					{ "name": "පේදුරුතුඩුව", "xPercent": 38.1, "yPercent": 9.5, "info": "" }, { "name": "කන්කසන්තුරේ", "xPercent": 29.6, "yPercent": 9.9, "info": "" }, 
					{ "name": "සූකරතිත්ථ(ඌරාතොට)", "xPercent": 27.6, "yPercent": 12.2, "info": "ලංකාවේ යාපන අර්ධද්වීපයේ පරිවාර දූපත් සමූහයේ විශාල ම දූපත වන කයිට්ස් හි පිහිටා තිබේ.සූකරතිත්ථ යනු ද මෙයම ය. " }, 
					{ "name": "ඌරාතොට(සූකරතිත්ථ)", "xPercent": 27.6, "yPercent": 12.2, "info": "ලංකාවේ යාපන අර්ධද්වීපයේ පරිවාර දූපත් සමූහයේ විශාල ම දූපත වන කයිට්ස් හි පිහිටා තිබේ.සූකරතිත්ථ යනු ද මෙයම ය. " }, 
					{ "name": "හැමන්හිල්", "xPercent": 27.7, "yPercent": 10.0, "info": "ලංකාවේ ලන්දේසි බලකොටුවකි" }, 
					{ "name": "නල්ලූර්", "xPercent": 32.4, "yPercent": 12.3, "info": "යාපන රාජධානියේ රජ මාළිගය පිහිටා තිබූ ස්ථානය යි.සුප්‍රසිද්ධ කෝවිලක් ද පිහිටා තිබේ." }, 
					{ "name": "අලිමංකඩ", "xPercent": 42.1, "yPercent": 15.4, "info": "ලංකාවේ ප්‍රාග් ඓතිහාසික ස්ථානයකි. යුධ කඳවුරක් හා ආරක්ෂක මර්මස්ථානයක් වශයෙන් අතීතයේ සිට අද දක්වාත් ප්‍රකටව පවතී.කෝට්ටේ යුගයේ මෙය ජාවක සෙබලුන් විසින් රැකවල් කළ නිසා 'ජාවක කෝට්ටේ' නමින් හඳුන්වා ඇත." }, 
					{ "name": "කන්දරෝඩය", "xPercent": 30.9, "yPercent": 11.2, "info": "යාපන අර්ධද්වීපයේ බෞද්ධ නටබුන් රැසක් සහිත ස්ථානයකි. මෙහි ඇති කුඩා ස්ථූප සමූහය අග්නිදිග ආසියානු ලක්ෂණ සහිතය." }, 
					{ "name": "කදුරුගොඩ", "xPercent": 30.9, "yPercent": 11.2, "info": "යාපන අර්ධද්වීපයේ බෞද්ධ නටබුන් රැසක් සහිත ස්ථානයකි. මෙහි ඇති කුඩා ස්ථූප සමූහය අග්නිදිග ආසියානු ලක්ෂණ සහිතය." }, 
					{ "name": "පාචීනාරාමය", "xPercent": 34.2, "yPercent": 9.9, "info": "උතුරු ලංකාවේ ඉපැරණි බෞද්ධ සිද්ධස්ථානයකි." }, 
					{ "name": "වැල්වැටිතුරෙයි", "xPercent": 35.8, "yPercent": 9.5, "info": "පැරණි ලංකාවේ වරායකි." }, 
					{ "name": "පියංගුදීප", "xPercent": 25.9, "yPercent": 14.1, "info": "යාපන අර්ධද්වීපයේ පරිවාර දූපත් සමූහය අතරින් එකකි. බෞද්ධ නටඹුන් තිබූ ස්ථානයකි." }, 
					{ "name": "ඉරණමඩුව", "xPercent": 41.7, "yPercent": 19.5, "info": "ප්‍රාග් ඓතිහාසික අතින් අතිශය වැදගත් ස්ථානයකි. මෙහි පස් ස්ථර පිහිටීම 'ඉරණමඩු සංයුතිය' නමින් හඳුන්වයි." }, 
					{ "name": "ඉරණමඩු වැව", "xPercent": 43.8, "yPercent": 20.4, "info": "කනගරායන් ආරුව ආශ්‍රිත ජලාශයකි." }, 
					{ "name": "කුරුන්දි", "xPercent": 51.3, "yPercent": 22.0, "info": "ඉපැරණි බෞද්ධ සිද්ධස්ථානයකි" }, 
					{ "name": "මුලතිව්", "xPercent": 54.6, "yPercent": 21.7, "info": "පැරණි වරයෙක් තිබූ ස්ථානයකැයි අනුමාන කරන තැනකි." }, 
					{ "name": "මීපාතොට", "xPercent": 32.9, "yPercent": 23.5, "info": "මධුපාදතිත්ථ නමින් ද හඳුන්වන මේ ස්ථානය පැරණි වරායකි" },
					{ "name": "මධුපාදතිත්ථ", "xPercent": 32.9, "yPercent": 23.5, "info": "මධුපාදතිත්ථ නමින් ද හඳුන්වන මේ ස්ථානය පැරණි වරායකි" },
					{ "name": "මහාතිත්ථ", "xPercent": 27.8, "yPercent": 27.7, "info": "මහාතීර්ථ, මාතොට, මාන්තෙයි ආදි නම් වලින් ද හැඳින්වෙන මෙය අනුරාධපුර යුගයේ ලංකාවේ ප්‍රධාන අන්තර්ජාතික වරායයි. මෙය මල්වතු ඔයේ පැරණි මෝදර ආශ්‍රිතව පිහිටා තිබේ." },
					{ "name": "මාතොට(මහාතිත්ථ)", "xPercent": 27.8, "yPercent": 27.7, "info": "මහාතීර්ථ, මාතොට, මාන්තෙයි ආදි නම් වලින් ද හැඳින්වෙන මෙය අනුරාධපුර යුගයේ ලංකාවේ ප්‍රධාන අන්තර්ජාතික වරායයි. මෙය මල්වතු ඔයේ පැරණි මෝදර ආශ්‍රිතව පිහිටා තිබේ." },
					{ "name": "මාන්තෙයි(මහාතිත්ථ)", "xPercent": 27.8, "yPercent": 27.7, "info": "මහාතීර්ථ, මාතොට, මාන්තෙයි ආදි නම් වලින් ද හැඳින්වෙන මෙය අනුරාධපුර යුගයේ ලංකාවේ ප්‍රධාන අන්තර්ජාතික වරායයි. මෙය මල්වතු ඔයේ පැරණි මෝදර ආශ්‍රිතව පිහිටා තිබේ." },
					{ "name": "මාන්තෝට්ටම්(මහාතිත්ථ)", "xPercent": 27.8, "yPercent": 27.7, "info": "මහාතීර්ථ, මාතොට, මාන්තෙයි ආදි නම් වලින් ද හැඳින්වෙන මෙය අනුරාධපුර යුගයේ ලංකාවේ ප්‍රධාන අන්තර්ජාතික වරායයි. මෙය මල්වතු ඔයේ පැරණි මෝදර ආශ්‍රිතව පිහිටා තිබේ." },
					{ "name": "මහපටුන්(මහාතිත්ථ)", "xPercent": 27.8, "yPercent": 27.7, "info": "මහාතීර්ථ, මාතොට, මාන්තෙයි ආදි නම් වලින් ද හැඳින්වෙන මෙය අනුරාධපුර යුගයේ ලංකාවේ ප්‍රධාන අන්තර්ජාතික වරායයි. මෙය මල්වතු ඔයේ පැරණි මෝදර ආශ්‍රිතව පිහිටා තිබේ." },
					{ "name": "තිරුකේතීශ්වරම්", "xPercent": 28.9, "yPercent": 27.7, "info": "වෙළඳාම සඳහා මහාතිත්ථයට ආ ඉන්දීය හින්දුභක්තික ජනවාගේ ආගමික අවශ්‍යතා වෙනුවෙන් කළ හින්දු කෝවිලක් සේ පිළිගැනෙයි" },
					{ "name": "යෝධ වැව", "xPercent": 30.7, "yPercent": 29.3, "info": "#" },
					{ "name": "මඩු", "xPercent": 33.8, "yPercent": 30.0, "info": "#" },
					{ "name": "කෝකිලායි කලපුව", "xPercent": 57.9, "yPercent": 28.7, "info": "#" },
					{ "name": "ආකට්ටිමුරුප්පු වැව", "xPercent": 29.2, "yPercent": 32.1, "info": "ධාතුසේන රජුගේ වාරි ව්‍යාපෘතියකි" },
					{ "name": "උපතිස්ස ග්‍රාමය(?)", "xPercent": 37.6, "yPercent": 34.5, "info": "සංක්‍රමණික ඉන්දීය ජනයා බලය පිහිටුවාගත් ලංකාවේ මුල් කාලීන ජනාවාසයකි'යි අනුමාන කෙරේ" },
					{ "name": "තන්තිරිමලේ", "xPercent": 35.8, "yPercent": 35.3, "info": "උතුරුමැද පළාතේ පැරණි බෞද්ධ මධ්‍යස්ථානයකි." },
					{ "name": "කුදිරමලේ", "xPercent": 26.3, "yPercent": 36.2, "info": "ප්‍රාග් ඓතිහාසික සාධක ලැබුණු භූමියකි" },
					{ "name": "පොම්පරිප්පු", "xPercent": 25.5, "yPercent": 40.5, "info": "පූර්ව ඓතිහාසික ස්ථානයකි. මෙහි තිබී බරණි සුසාන ක්‍රමයේ සාධක හමුවූ ස්ථානයකි." },
					{ "name": "විල්පත්තු", "xPercent": 27.1, "yPercent": 39.4, "info": "ප්‍රාග් ඓතිහාසික සාධක ලැබුණු තැනකි." },
					{ "name": "විජිතපුර(?)", "xPercent": 39.0, "yPercent": 45.3, "info": "#" },
					{ "name": "තිසා වැව", "xPercent": 39.4, "yPercent": 40.3, "info": "#" },
					{ "name": "නුවර වැව", "xPercent": 41.5, "yPercent": 40.6, "info": "#" },
					{ "name": "නාච්චිදූව වැව", "xPercent": 42.9, "yPercent": 42.8, "info": "#" },
					{ "name": "චේතියගිරි(මිහින්තලේ)", "xPercent": 42.2, "yPercent": 41.6, "info": "#" },
					{ "name": "මිහින්තලේ", "xPercent": 42.2, "yPercent": 41.6, "info": "#" },
					{ "name": "සෑ ගිරි(මිහින්තලේ)", "xPercent": 42.2, "yPercent": 41.6, "info": "#" },
					{ "name": "තිරියාය(ගිරිකණ්ඩ)", "xPercent": 59.6, "yPercent": 30.4, "info": "#" },
					{ "name": "ගිරිකණ්ඩ(තිරියාය))", "xPercent": 59.6, "yPercent": 30.4, "info": "#" },
					{ "name": "පල්ලවංක", "xPercent": 60.9, "yPercent": 30.7, "info": "#" },
					{ "name": "ගෝකණ්ණතිත්ථ", "xPercent": 64.9, "yPercent": 37.2, "info": "#" },
					{ "name": "ත්‍රිකුණාමල වරාය", "xPercent": 64.9, "yPercent": 37.2, "info": "#" },
					{ "name": "ගෝකණ්ණ", "xPercent": 64.9, "yPercent": 37.2, "info": "#" },
					{ "name": "ෆෙඩ්රික් කොටුව", "xPercent": 66.0, "yPercent": 37.1, "info": "#" },
					{ "name": "ගෝකණ්ණ විහාරය", "xPercent": 66.0, "yPercent": 37.1, "info": "#" },
					{ "name": "තිරුකෝණේශ්වරම්", "xPercent": 66.0, "yPercent": 37.3, "info": "#" },
					{ "name": "කෝණේශ්වරම්", "xPercent": 66.0, "yPercent": 37.3, "info": "#" },
					{ "name": "කොට්ටියාරම", "xPercent": 68.0, "yPercent": 38.3, "info": "#" },
					{ "name": "කොට්ඨසාර", "xPercent": 68.0, "yPercent": 38.3, "info": "#" },
					{ "name": "කොටසර", "xPercent": 68.0, "yPercent": 38.3, "info": "#" },
					{ "name": "ලංකාපටුන", "xPercent": 69.8, "yPercent": 41.6, "info": "#" },
					{ "name": "සේරුවාවිල", "xPercent": 67.7, "yPercent": 41.7, "info": "#" },
					{ "name": "සේරිනගර", "xPercent": 67.7, "yPercent": 41.7, "info": "#" },
					{ "name": "මැදිරිගිරිය", "xPercent": 57.1, "yPercent": 43.4, "info": "#" },
					{ "name": "මණ්ඩලගිරි(මැදිරිගිරිය)", "xPercent": 57.1, "yPercent": 43.4, "info": "#" },					
					{ "name": "කන්තලේ වැව", "xPercent": 58.1, "yPercent": 41.4, "info": "#" },
					{ "name": "හුරුළු වැව", "xPercent": 50.1, "yPercent": 44.0, "info": "#" },
					{ "name": "රිටිගල", "xPercent": 47.8, "yPercent": 46.5, "info": "#" },
					{ "name": "කසාපබ්බත", "xPercent": 41.6, "yPercent": 44.0, "info": "#" },
					{ "name": "උරුවේලතිත්ථ", "xPercent": 23.7, "yPercent": 40.5, "info": "#" },
					{ "name": "උරුවේලගාම", "xPercent": 23.7, "yPercent": 40.5, "info": "#" },
					{ "name": "උරුවේල්තොට", "xPercent": 23.7, "yPercent": 40.5, "info": "#" },
					{ "name": "කල්පිටිය", "xPercent": 20.6, "yPercent": 42.4, "info": "#" },
					{ "name": "පුත්තලම", "xPercent": 22.3, "yPercent": 46.2, "info": "#" },
					{ "name": "සලාවත්තොට(හලාවත)", "xPercent": 21.2, "yPercent": 55.8, "info": "#" },
					{ "name": "හලාවත", "xPercent": 21.2, "yPercent": 55.8, "info": "#" },
					{ "name": "සල්වතොට", "xPercent": 21.2, "yPercent": 55.8, "info": "#" },
					{ "name": "සැල්වතොට", "xPercent": 21.2, "yPercent": 55.8, "info": "#" },
					{ "name": "මුන්නේස්වරම්", "xPercent": 22.4, "yPercent": 56.0, "info": "#" },
					{ "name": "පඬුවස්නුවර", "xPercent": 27.8, "yPercent": 56.9, "info": "#" },
					{ "name": "පරක්කමපුර", "xPercent": 27.8, "yPercent": 56.9, "info": "#" },
					{ "name": "තෝණිගල", "xPercent": 46.1, "yPercent": 32.9, "info": "සිරිමේඝවණ්ණ රජුගේ සෙල්ලිපිය පිහිටි ස්ථානය යි." },
					{ "name": "තෝනිගල(ආනමඩුවේ)", "xPercent": 25.1, "yPercent": 49.4, "info": "#" },
					{ "name": "කුරුණැගල", "xPercent": 39.5, "yPercent": 59.6, "info": "#" },
					{ "name": "මාතලේ", "xPercent": 45.5, "yPercent": 59.1, "info": "#" },
					{ "name": "යාපහුව", "xPercent": 36.9, "yPercent": 52.1, "info": "#" },
					{ "name": "තබ්බෝව වැව", "xPercent": 25.8, "yPercent": 47.0, "info": "#" },
					{ "name": "සැස්සේරුව", "xPercent": 38.6, "yPercent": 47.9, "info": "#" },
					{ "name": "අවුකන", "xPercent": 43.6, "yPercent": 48.9, "info": "#" },
					{ "name": "කලා වැව", "xPercent": 44.4, "yPercent": 48.3, "info": "#" },
					{ "name": "ඉබ්බන්කටුව", "xPercent": 45.3, "yPercent": 53.2, "info": "#" },
					{ "name": "දඹුල්ල", "xPercent": 46.5, "yPercent": 53.0, "info": "#" },
					{ "name": "මාපාගල", "xPercent": 49.7, "yPercent": 49.3, "info": "#" },
					{ "name": "අලිගල", "xPercent": 50.7, "yPercent": 49.5, "info": "#" },
					{ "name": "පොතාන", "xPercent": 49.9, "yPercent": 49.6, "info": "#" },
					{ "name": "පිදුරංගල", "xPercent": 50.7, "yPercent": 49.8, "info": "#" },
					{ "name": "බසවක්කුලම(අබය වැව)", "xPercent": 39.6, "yPercent": 39.8, "info": "#" },
					{ "name": "පදවිය වැව", "xPercent": 52.9, "yPercent": 32.7, "info": "#" },
					{ "name": "කවුඩුල්ල වැව", "xPercent": 55.6, "yPercent": 45.0, "info": "#" },
					{ "name": "මින්නේරිය වැව", "xPercent": 54.8, "yPercent": 46.5, "info": "#" },
					{ "name": "ගිරිතලේ වැව", "xPercent": 56.4, "yPercent": 48.2, "info": "#" },
					{ "name": "සෝම නගර", "xPercent": 61.5, "yPercent": 45.5, "info": "#" },
					{ "name": "ලෝණ නගර", "xPercent": 68.8, "yPercent": 44.8, "info": "#" },
					{ "name": "පරාක්‍රම සමුද්‍රය", "xPercent": 57.0, "yPercent": 50.7, "info": "#" },
					{ "name": "නාලන්ද", "xPercent": 43.6, "yPercent": 53.1, "info": "#" },
					{ "name": "මොරගහකන්ද ජලාශය", "xPercent": 48.5, "yPercent": 55.1, "info": "#" },
					{ "name": "බෝවතැන්න ජලාශය", "xPercent": 47.0, "yPercent": 55.4, "info": "#" },
					{ "name": "ගන්නොරුව", "xPercent": 44.1, "yPercent": 62.3, "info": "#" },
					{ "name": "පොල්ගොල්ල අමුණ", "xPercent": 45.3, "yPercent": 62.6, "info": "#" },
					{ "name": "අඟමැඬිල්ල අමුණ", "xPercent": 55.1, "yPercent": 51.8, "info": "#" },
					{ "name": "ඇළහැර අමුණ", "xPercent": 51.6, "yPercent": 54.3, "info": "#" },
					{ "name": "කසාතොට(කච්ඡකතිත්ථ)", "xPercent": 59.8, "yPercent": 51.2, "info": "#" },
					{ "name": "දාස්තොට (සහස්සතිත්ථ)", "xPercent": 59.2, "yPercent": 51.8, "info": "#" },
					{ "name": "දිඹුලාගල", "xPercent": 58.8, "yPercent": 52.5, "info": "#" },
					{ "name": "නාලිකේරවත්ථු", "xPercent": 57.2, "yPercent": 54.7, "info": "#" },
					{ "name": "කෝඨනගර", "xPercent": 56.6, "yPercent": 57.4, "info": "#" },
					{ "name": "අම්බතිත්ථ", "xPercent": 56.3, "yPercent": 57.9, "info": "#" },
					{ "name": "ලංකා පබ්බත", "xPercent": 55.2, "yPercent": 58.4, "info": "#" },
					{ "name": "මාදුරුඔය ජලාශය", "xPercent": 68.9, "yPercent": 57.6, "info": "#" },
					{ "name": "මඩකලපුව", "xPercent": 78.1, "yPercent": 56.2, "info": "#" },
					{ "name": "ලුණුවිල", "xPercent": 21.9, "yPercent": 58.6, "info": "#" },
					{ "name": "දඹදෙණිය", "xPercent": 28.8, "yPercent": 60.8, "info": "#" },
					{ "name": "අඹේපුස්ස", "xPercent": 32.6, "yPercent": 64.1, "info": "#" },
					{ "name": "දැදිගම", "xPercent": 33.3, "yPercent": 64.4, "info": "#" },
					{ "name": "මැණික්කඩවර", "xPercent": 33.7, "yPercent": 65.1, "info": "#" },
					{ "name": "අත්තනගල්ල", "xPercent": 29.8, "yPercent": 66.0, "info": "#" },
					{ "name": "මීගමුව", "xPercent": 21.3, "yPercent": 63.7, "info": "#" },
					{ "name": "මුතුරාජවෙල", "xPercent": 22.0, "yPercent": 66.5, "info": "#" },
					{ "name": "වත්තල", "xPercent": 21.6, "yPercent": 67.0, "info": "#" },
					{ "name": "කැළණිය", "xPercent": 23.3, "yPercent": 69.0, "info": "#" },
					{ "name": "කොළඹ", "xPercent": 21.3, "yPercent": 69.2, "info": "#" },
					{ "name": "කිත්සිරිමෙවන් කැළණිය", "xPercent": 22.8, "yPercent": 69.6, "info": "#" },
					{ "name": "කෝට්ටේ", "xPercent": 22.5, "yPercent": 70.2, "info": "#" },
					{ "name": "මුල්ලේරියාව", "xPercent": 23.1, "yPercent": 70.3, "info": "#" },
					{ "name": "මල්වාන", "xPercent": 26.0, "yPercent": 69.1, "info": "#" },
					{ "name": "බෙලිගල", "xPercent": 35.6, "yPercent": 62.6, "info": "#" },
					{ "name": "දන්තුරේ", "xPercent": 43.7, "yPercent": 62.5, "info": "#" },
					{ "name": "බලන", "xPercent": 42.8, "yPercent": 63.5, "info": "#" },
					{ "name": "වාකිරිගල", "xPercent": 39.2, "yPercent": 64.4, "info": "#" },
					{ "name": "දෙවනගල", "xPercent": 35.3, "yPercent": 65.2, "info": "#" },
					{ "name": "බෙලිලෙන", "xPercent": 39.6, "yPercent": 67.6, "info": "#" },
					{ "name": "සීතාවක", "xPercent": 34.5, "yPercent": 69.7, "info": "#" },
					{ "name": "පළාබත්ගල", "xPercent": 40.3, "yPercent": 72.3, "info": "#" },
					{ "name": "බටතොටලෙන", "xPercent": 36.8, "yPercent": 72.7, "info": "#" },
					{ "name": "බටදොඹලෙන", "xPercent": 37.3, "yPercent": 74.2, "info": "#" },
					{ "name": "පාලින්දනුවර", "xPercent": 34.5, "yPercent": 79.5, "info": "#" },
					{ "name": "පේරාදෙණිය", "xPercent": 44.7, "yPercent": 63.8, "info": "#" },
					{ "name": "කඩුගන්නාව", "xPercent": 43.9, "yPercent": 63.9, "info": "#" },
					{ "name": "හඟුරන්කෙත", "xPercent": 49.0, "yPercent": 65.3, "info": "#" },
					{ "name": "වික්ටෝරියා ජලාශය", "xPercent": 46.9, "yPercent": 63.3, "info": "#" },
					{ "name": "රන්දෙණිගල ජලාශය", "xPercent": 48.4, "yPercent": 63.8, "info": "#" },
					{ "name": "රන්ටැඹේ ජලාශය", "xPercent": 50.0, "yPercent": 64.5, "info": "#" },
					{ "name": "මිණිපේ අමුණ", "xPercent": 55.3, "yPercent": 65.4, "info": "#" },
					{ "name": "ගම්පොළ", "xPercent": 42.9, "yPercent": 66.6, "info": "ගඟසිරිපුර/ගංගාශ්‍රීපුර" },
					{ "name": "ගංදෙණිය(මිණිපේ)", "xPercent": 54.8, "yPercent": 65.2, "info": "#" },
					{ "name": "තලවාකැලේ", "xPercent": 47.6, "yPercent": 71.9, "info": "#" },
					{ "name": "කොත්මලේ", "xPercent": 44.9, "yPercent": 70.2, "info": "#" },
					{ "name": "කොත්මලේ ජලාශය", "xPercent": 45.3, "yPercent": 70.0, "info": "#" },
					{ "name": "ශ්‍රීපාදය", "xPercent": 40.3, "yPercent": 73.2, "info": "#" },
					{ "name": "හෝර්ටන් තැන්න", "xPercent": 48.6, "yPercent": 72.3, "info": "#" },
					{ "name": "බලංගොඩ", "xPercent": 48.2, "yPercent": 76.5, "info": "#" },
					{ "name": "බෙරගල", "xPercent": 55.5, "yPercent": 74.7, "info": "#" },
					{ "name": "බදුල්ල", "xPercent": 56.5, "yPercent": 71.0, "info": "#" },
					{ "name": "බණ්ඩාරවෙල", "xPercent": 54.1, "yPercent": 69.8, "info": "#" },
					{ "name": "රන්දෙණිවෙල සටන්බිම", "xPercent": 59.5, "yPercent": 71.7, "info": "#" },
					{ "name": "මඩොල්සිම", "xPercent": 60.1, "yPercent": 70.4, "info": "#" },
					{ "name": "නිල්ගල", "xPercent": 65.0, "yPercent": 66.8, "info": "#" },
					{ "name": "දානිගල", "xPercent": 67.4, "yPercent": 63.7, "info": "#" },
					{ "name": "ගල්ඔය ජලාශය", "xPercent": 71.3, "yPercent": 66.1, "info": "#" },
					{ "name": "හේනෙබැද්ද", "xPercent": 67.9, "yPercent": 67.8, "info": "#" },		
					
					
					
					] },
                india_al: { url: "https://www.eduhelp.lk/wp-content/uploads/2025/05/IND-with-MB_2019a-scaled.jpg", displayName: "උසස් පෙළ ඉන්දියා සිතියම", places: [ 
					{ name: "බොම්බාය", xPercent: 30.8, yPercent: 61.3, info: "මුම්බායි නගරය ඉන්දියාවේ ප්‍රධාන වාණිජ හා මූල්‍ය මධ්‍යස්ථානය වෙයි. එය මුලින් පෘතුගීසීන් විසින් පාලනය කරන ලදි." }, 
					{ name: "කල්කටා", xPercent: 74.1, yPercent: 52.3, info: " " }, 
					{ name: "බරණැස්(වාරාණසි)", xPercent: 57.6, yPercent: 46.5, info: "ගංගා නදිය අසල පිහිටි මෙම ඓතිහාසික නගරය හින්දු ආගමික කටයුතු සඳහා වැදගත් මධ්‍යස්ථානයක් ලෙස පවතී." }, 
					{ name: "පාටලිපුත්‍ර(පැට්නා)", xPercent: 63.5, yPercent: 44.9, info: "මෞර්ය අධිරාජ්‍යයේ අගනුවර වූ මෙම නගරය අශෝක අධිරාජයාගේ පාලන කාලයේදී විශේෂ වැදගත්කමක් දැරීය." }, 
					] },
               
			   europe_al: { url: "https://www.eduhelp.lk/wp-content/uploads/2025/05/web_Europe-01-scaled.jpg", displayName: "උසස් පෙළ යුරෝපා සිතියම", places: [ 
					{ name: "ලන්ඩන්", xPercent: 26.3, yPercent: 46.2, info: "බ්‍රිතාන්‍ය අධිරාජ්‍යයේ අගනුවර ලෙස ලන්ඩනය ලෝක ඉතිහාසයේ වැදගත් වෙයි. එය තේම්ස් ගංඟාව අසල පිහිටා ඇත." }, 
					{ name: "පැරිස්", xPercent: 26.5, yPercent: 53.0, info: "ප්‍රංශ අධිරාජ්‍යයේ අගනුවර ලෙස සහ යුරෝපීය නැවෝදයේ වැදගත් මධ්‍යස්ථානයක් වූ පැරිස් නගරය ලෝක ඉතිහාසයට බෙහෙවින් බලපෑවේය." }, 
					{ name: "රෝමය", xPercent: 36.4, yPercent: 76.0, info: "රෝම අධිරාජ්‍යයේ අගනුවර වූ රෝමය ලෝක ඉතිහාසයේ වැදගත්ම නගරයක් ලෙස සැලකේ. පාප්වරුන්ගේ බලකොටුව ද මෙහි පිහිටා ඇත." }, 
					{ name: "බර්ලින්", xPercent: 38.3, yPercent: 50.5, info: "ජර්මනියේ අගනුවර වන බර්ලින් නගරය දෙවන ලෝක යුද්ධය අවසානයේ සීතල යුද්ධයේ කේන්ද්‍රස්ථානයක් විය." },
					] },
                
				sl_ol: { url: "https://www.eduhelp.lk/wp-content/uploads/2025/05/web-සා-පෙළ-ලංකා-01.jpg", displayName: "සාමාන්‍ය පෙළ ලංකා සිතියම", places: [ 
					{ name: "අනුරාධපුරය", xPercent: 37.9, yPercent: 41.6, info: "ශ්‍රී ලංකාවේ පළමු අගනුවර. වසර 1400 කට වැඩි කාලයක් අගනුවර ලෙස පැවතුණි." }, 
					{ name: "මහනුවර", xPercent: 45.5, yPercent: 67.0, info: "ශ්‍රී ලංකාවේ අවසාන ස්වාධීන රාජධානිය. 1815 දී බ්‍රිතාන්‍යයන්ට යටත් විය." }, 
					{ name: "පොළොන්නරුව", xPercent: 57.3, yPercent: 52.3, info: "දෙවන මහා නගරය ලෙස වසර 250ක පමණ කාලයක් පැවතුණි." }, 
					] },
               
			   eurasia_ol: { url: "https://www.eduhelp.lk/wp-content/uploads/2025/05/web-Eurasia-map-01.jpg", displayName: "සාමාන්‍ය පෙළ යුරේසියා සිතියම", places: [ 
					{ name: "රෝමය", xPercent: 19.7, yPercent: 49.2, info: "රෝම අධිරාජ්‍යයේ අගනුවර වූ රෝමය ලෝක ඉතිහාසයේ වැදගත්ම නගරයක් ලෙස සැලකේ. පාප්වරුන්ගේ බලකොටුව ද මෙහි පිහිටා ඇත." }, 
					{ name: "මොස්කව්", xPercent: 31.8, yPercent: 34.1, info: "රුසියාවේ අගනුවර වන මොස්කව් නගරය, සෝවියට් සංගමයේ කේන්ද්‍රස්ථානය ලෙස තිබුණි." }, 
					{ name: "බීජිං", xPercent: 68.4, yPercent: 50.6, info: "චීනයේ අගනුවර වන බීජිං නගරය, පැරණි චීන අධිරාජ්‍යයේ කේන්ද්‍රස්ථානයකි." }, 
					{ name: "ටෝකියෝ", xPercent: 80.0, yPercent: 53.4, info: "ජපානයේ අගනුවර වන ටෝකියෝ නගරය, මෙයිජි යුගයේ සිට ජපානයේ ආර්ථික හා දේශපාලන කේන්ද්‍රස්ථානය වේ." },	 
					] }
            };
            
            mapImage.src = maps[currentMapKey].url;
            populatePlacesList(maps[currentMapKey].places);
            createAlphabetButtons();
            
            mapImage.onload = function() {
                mapWrapper.style.width = this.naturalWidth + 'px';
                mapWrapper.style.height = this.naturalHeight + 'px'; // Ensure wrapper takes image height
                centerMapInView();
            };

            function displayPlaces(placesToDisplay) { // Renamed parameter for clarity
                placesListUL.innerHTML = '';
                // Corrected sorting for name property
                placesToDisplay.sort((a, b) => a.name.localeCompare(b.name, 'si')); 
                
                if (placesToDisplay.length === 0 && placeSearchInput.value !== '') {
                    const noResultsItem = document.createElement('li');
                    noResultsItem.textContent = "ගැළපෙන ස්ථාන හමු නොවීය.";
                    noResultsItem.style.fontStyle = 'italic';
                    noResultsItem.style.color = '#777';
                    noResultsItem.style.cursor = 'default';
                    noResultsItem.style.borderBottom = 'none';
                    placesListUL.appendChild(noResultsItem);
                }

                placesToDisplay.forEach(place => {
                    const listItem = document.createElement('li');
                    listItem.textContent = place.name;
                    listItem.addEventListener('click', function() {
                        selectPlace(place);
                    });
                    placesListUL.appendChild(listItem);
                });
            }

            function selectPlace(place) {
                const allItems = placesListUL.querySelectorAll('li');
                allItems.forEach(item => item.classList.remove('active'));
                
                // Find the specific list item for the selected place and make it active
                const selectedListItem = Array.from(allItems).find(item => item.textContent === place.name);
                if (selectedListItem) {
                    selectedListItem.classList.add('active');
                }
                
                const xPos = (place.xPercent / 100) * mapImage.width;
                const yPos = (place.yPercent / 100) * mapImage.height;
                
                showMarker(xPos, yPos, place.name, place.info);
                centerMapOnPoint(xPos, yPos);
                activePlace = place;
                
                // Hide alphabet/show all buttons and show back button
                resetPopupButtonsVisibility(false); // Hide
                addBackButton(); // Add back button

                // Filter visible places in the list to only show the selected one
                placesListUL.innerHTML = ''; // Clear main list first
                const listItem = document.createElement('li');
                listItem.textContent = place.name;
                listItem.classList.add('active'); // Add active class to the single selected item
                placesListUL.appendChild(listItem);


                // Clear search input and hide suggestions when a place is selected
                placeSearchInput.value = '';
                suggestionsList.innerHTML = '';
                suggestionsList.style.display = 'none';

                // Auto-close popup after selecting a place
                placeListPopup.classList.remove('visible');
                mapDropdown.classList.remove('show'); 
            }

            function showMarker(x, y, name, info) {
                locationMarker.style.left = x + 'px';
                locationMarker.style.top = y + 'px';
                locationMarker.style.display = 'block';
                locationRing.style.left = x + 'px';
                locationRing.style.top = y + 'px';
                locationRing.style.display = 'block';
                infoContent.textContent = info;
                tooltip.textContent = name;
                tooltip.style.left = (x + 15) + 'px'; 
                tooltip.style.top = (y + 15) + 'px';  
                tooltip.style.display = 'block';
            }

            function centerMapInView() {
                const mapContainerWidth = mapContainer.clientWidth;
                const mapContainerHeight = mapContainer.clientHeight;
                const mapWidth = mapWrapper.clientWidth;
                const mapHeight = mapWrapper.clientHeight;
                const scrollLeft = (mapWidth - mapContainerWidth) / 2;
                const scrollTop = (mapHeight - mapContainerHeight) / 2;
                mapContainer.scrollLeft = scrollLeft;
                mapContainer.scrollTop = scrollTop;
            }

            function centerMapOnPoint(x, y) {
                const mapContainerWidth = mapContainer.clientWidth;
                const mapContainerHeight = mapContainer.clientHeight;
                const scrollLeft = x - (mapContainerWidth / 2);
                const scrollTop = y - (mapContainerHeight / 2);
                mapContainer.scrollTo({ left: scrollLeft, top: scrollTop, behavior: 'smooth' });
            }

            function populatePlacesList(places) {
                displayPlaces(places);
                 // Ensure buttons are visible if no filter/selection is active
                resetPopupButtonsVisibility(true); // Show alphabet and show all buttons
                removeBackButton(); // Remove back button if present
            }
            
            function resetPopupButtonsVisibility(show) {
                const placeListContentWrapper = placeListPopup.querySelector('.place-list-content-wrapper');
                if (placeListContentWrapper) {
                    placeListContentWrapper.querySelector('#alphabetButtons').style.display = show ? 'flex' : 'none';
                    placeListContentWrapper.querySelector('#showAllButton').style.display = show ? 'block' : 'none';
                }
            }

            function addBackButton() {
                const placeListContentWrapper = placeListPopup.querySelector('.place-list-content-wrapper');
                if (!placeListContentWrapper.querySelector('#backButton')) {
                    const backButton = document.createElement('button');
                    backButton.id = 'backButton';
                    backButton.className = 'show-all-button'; // Reusing class for styling
                    backButton.textContent = 'අකාරාදිය අනුව තෝරන්න';
                    backButton.addEventListener('click', function() {
                        resetPopupState();
                    });
                    placeListContentWrapper.insertBefore(backButton, placesListUL);
                }
            }

            function removeBackButton() {
                const placeListContentWrapper = placeListPopup.querySelector('.place-list-content-wrapper');
                const backButton = placeListContentWrapper.querySelector('#backButton');
                if (backButton) {
                    backButton.remove();
                }
            }

            function resetPopupState() {
                // Reset search and filters
                placeSearchInput.value = '';
                suggestionsList.innerHTML = '';
                suggestionsList.style.display = 'none';
                activeLetterFilter = null;
                updateAlphabetButtonsState(); // Clear active alphabet button
                populatePlacesList(maps[currentMapKey].places); // Re-display all places
                resetPopupButtonsVisibility(true); // Show alphabet and show all buttons
                removeBackButton(); // Ensure back button is removed
                
                // Clear active class from all list items
                const allItems = placesListUL.querySelectorAll('li');
                allItems.forEach(item => {
                    item.classList.remove('active');
                    item.style.display = 'block'; // Ensure all are visible
                });
            }

            function resetView() {
                locationMarker.style.display = 'none';
                locationRing.style.display = 'none';
                tooltip.style.display = 'none';
                infoContent.textContent = 'ස්ථානයක් තෝරන්න'; // Reset info bar text
                centerMapInView();
                activePlace = null;
                
                resetPopupState(); // This will handle list and button visibility
                // Optionally close popup on reset, or leave it as is
                // placeListPopup.classList.remove('visible');
                // mapDropdown.classList.remove('show');
            }

            function createAlphabetButtons() {
                alphabetButtons.innerHTML = '';
                const sinhalaAlphabet = [ 'අ', 'ආ', 'ඇ', 'ඈ', 'ඉ', 'ඊ', 'උ', 'ඌ', 'එ', 'ඒ', 'ඔ', 'ඕ', 'ක', 'ඛ', 'ග', 'ඝ', 'ඞ', 'ච', 'ඡ', 'ජ', 'ඣ', 'ඤ', 'ට', 'ඩ', 'ණ', 'ත', 'ථ', 'ද', 'ධ', 'න', 'ප', 'ඵ', 'බ', 'භ', 'ම', 'ය', 'ර', 'ල', 'ව', 'ශ', 'ෂ', 'ස', 'හ', 'ළ' ];
                const places = maps[currentMapKey].places;
                const firstLetters = new Set(places.map(place => place.name.charAt(0))); // Use Set for unique letters
                
                sinhalaAlphabet.forEach(letter => {
                    if (firstLetters.has(letter)) { // Check if any place starts with this letter
                        const button = document.createElement('button');
                        button.className = 'alphabet-button';
                        button.textContent = letter;
                        button.addEventListener('click', function() {
                            // Clear search input and hide suggestions when an alphabet button is clicked
                            placeSearchInput.value = '';
                            suggestionsList.innerHTML = '';
                            suggestionsList.style.display = 'none';

                            if (activeLetterFilter === letter) {
                                activeLetterFilter = null;
                                displayPlaces(maps[currentMapKey].places);
                            } else {
                                activeLetterFilter = letter;
                                const filteredPlaces = maps[currentMapKey].places.filter(
                                    place => place.name.charAt(0) === letter
                                );
                                displayPlaces(filteredPlaces);
                            }
                            updateAlphabetButtonsState();
                            resetPopupButtonsVisibility(true); // Always show these buttons when alphabet filter is active
                            removeBackButton(); // Remove back button if alphabet filtering
                        });
                        alphabetButtons.appendChild(button);
                    }
                });
            }

            function updateAlphabetButtonsState() {
                const buttons = alphabetButtons.querySelectorAll('.alphabet-button');
                buttons.forEach(button => {
                    if (button.textContent === activeLetterFilter) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });
            }

            mapSelectorHeader.addEventListener('click', function() { // For the dropdown inside popup
                mapDropdown.classList.toggle('show');
            });
            
            mapDropdown.querySelectorAll('a').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const mapKey = this.getAttribute('data-value');
                    currentMapKey = mapKey;
                    currentMapName.textContent = maps[mapKey].displayName;
                    mapImage.src = maps[mapKey].url;
                    resetView(); // This will repopulate the list for the new map and reset state
                    createAlphabetButtons(); // Recreate alphabet buttons for new map
                    mapDropdown.classList.remove('show');
                });
            });
            
            // Close map type dropdown when clicking outside of it (if it's open)
            document.addEventListener('click', function(e) {
                 if (mapDropdown.classList.contains('show') && !mapSelectorHeader.contains(e.target) && !mapDropdown.contains(e.target)) {
                    mapDropdown.classList.remove('show');
                }
            });


            footerResetButton.addEventListener('click', resetView);

            showAllButton.addEventListener('click', function() { // This button is inside the popup
                // Clear search input and hide suggestions when 'Show All' is clicked
                placeSearchInput.value = '';
                suggestionsList.innerHTML = '';
                suggestionsList.style.display = 'none';

                activeLetterFilter = null;
                updateAlphabetButtonsState();
                populatePlacesList(maps[currentMapKey].places); // Repopulate within popup
                resetPopupButtonsVisibility(true); // Always show these buttons when showing all
                removeBackButton(); // Ensure back button is removed
            });

            mapContainer.addEventListener('mouseleave', function() {
                if (!activePlace) {
                    tooltip.style.display = 'none';
                }
            });

            // --- Search Functionality ---
            placeSearchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const allPlaces = maps[currentMapKey].places;
                
                // Clear active alphabet filter when typing in search
                activeLetterFilter = null;
                updateAlphabetButtonsState();

                if (searchTerm.length > 0) {
                    const filteredPlaces = allPlaces.filter(place => 
                        place.name.toLowerCase().includes(searchTerm)
                    );
                    
                    // Only show suggestions in the suggestions list
                    displaySuggestions(filteredPlaces.slice(0, 5));
                    
                    // Clear the main places list when search input is active
                    placesListUL.innerHTML = '';

                    // Hide alphabet buttons and show all button
                    resetPopupButtonsVisibility(false);
                    removeBackButton(); // Ensure back button is removed when searching
                } else {
                    // If search input is empty, hide suggestions and show all places in the main list
                    suggestionsList.innerHTML = '';
                    suggestionsList.style.display = 'none';
                    populatePlacesList(allPlaces); // Show all places in main list
                    resetPopupButtonsVisibility(true); // Show alphabet and show all buttons
                }
            });

            function displaySuggestions(suggestions) {
                suggestionsList.innerHTML = '';
                if (suggestions.length > 0 && placeSearchInput.value.length > 0) {
                    suggestions.forEach(place => {
                        const li = document.createElement('li');
                        li.textContent = place.name;
                        li.addEventListener('click', function() {
                            placeSearchInput.value = place.name; // Fill search box with selected suggestion
                            suggestionsList.innerHTML = ''; // Clear suggestions
                            suggestionsList.style.display = 'none';
                            selectPlace(place); // Select the place on the map
                            // Since selectPlace auto-closes popup, no need to manually clear/hide
                        });
                        suggestionsList.appendChild(li);
                    });
                    suggestionsList.style.display = 'block';
                } else {
                    suggestionsList.style.display = 'none';
                }
            }

            // Hide suggestions if clicking outside search input or suggestions
            document.addEventListener('click', function(e) {
                if (!placeSearchInput.contains(e.target) && !suggestionsList.contains(e.target)) {
                    suggestionsList.style.display = 'none';
                }
            });

            resetView();
            currentMapName.textContent = maps[currentMapKey].displayName;
        });
    </script>
</body>
</html>
